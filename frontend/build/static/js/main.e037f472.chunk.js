(window.webpackJsonpintheclearweb=window.webpackJsonpintheclearweb||[]).push([[0],{113:function(e,t,a){},118:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),s=a.n(r),i=(a(93),a(45)),l=a(22),c=a(23),m=a.n(c),u=a(26),d=a(31),p=a(8),h=a(9),g=a(13),f=a(11),w=a(3),v=a(12),E=(a(51),a(95),a(71)),b=a.n(E),y=a(37),D=a.n(y),S=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).handlePlacesStartSelect=function(){var e=a.autocompleteStart.getPlace(),t=e.geometry.location.lat(),n=e.geometry.location.lng();a.setState({startCoordinates:{lat:t,lng:n,name:e.name}})},a.handlePlacesEndSelect=function(){var e=a.autocompleteDest.getPlace(),t=e.geometry.location.lat(),n=e.geometry.location.lng();a.setState({endCoordinates:{lat:t,lng:n,name:e.name}})},a.state={startCoordinates:{lat:37.3317,lng:-122.0306,name:"Apple HQ"},endCoordinates:{lat:37.3317,lng:-122.0306,name:"Apple HQ"}},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("locationStart"),t=document.getElementById("locationEnd");this.autocompleteStart=new window.google.maps.places.Autocomplete(e),this.autocompleteDest=new window.google.maps.places.Autocomplete(t),window.google.maps.event.addListener(this.autocompleteStart,"place_changed",this.handlePlacesStartSelect),window.google.maps.event.addListener(this.autocompleteDest,"place_changed",this.handlePlacesEndSelect)}},{key:"componentDidUpdate",value:function(e,t){t.startCoordinates!==this.state.startCoordinates?this.props.callbackStart(this.state.startCoordinates):t.endCoordinates!==this.state.endCoordinates&&this.props.callbackEnd(this.state.endCoordinates)}},{key:"render",value:function(){return o.a.createElement("div",{className:"row container"},o.a.createElement(b.a,{className:"directionsJumbotron ml-md-2 mt-md-2 col-5"},o.a.createElement("img",{className:"mx-auto d-block img-logo mb-1",alt:"logo",src:D.a}),o.a.createElement("div",{className:"input-group mb-1 mt-4"},o.a.createElement("input",{className:"form-control",id:"locationStart",type:"text",size:"50",placeholder:"Start Location",autoComplete:"on",runat:"server"})),o.a.createElement("div",{className:"input-group mb-1 mt-4"},o.a.createElement("input",{className:"form-control",id:"locationEnd",type:"text",size:"50",placeholder:"Destination Location",autoComplete:"on",runat:"server"}))))}}]),t}(n.Component),k=a(18),N=a.n(k),C=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).cityWeather=[],a.duration=0,a.distance=0,a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"createPolylineAndWeatherData",value:function(){var e=Object(d.a)(m.a.mark(function e(t,a,n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.generatePolyline(t[0],t[1],a,n);case 2:if(t.shift(),!(t.length>1)){e.next=6;break}return e.next=6,this.createPolylineAndWeatherData(t,a,n);case 6:return e.abrupt("return",[n,this.cityWeather,this.duration,this.distance]);case 7:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"generatePolyline",value:function(){var e=Object(d.a)(m.a.mark(function e(t,a,n,o){var r,s,i,l,c,u,d,p,h=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("/api/directions/".concat(t.lat,",").concat(t.lng,"/").concat(a.lat,",").concat(a.lng));case 3:return i=e.sent,r=window.google.maps.geometry.encoding.decodePath(i.data.points),s=i.data.steps,delete i.data.points,e.next=9,N.a.post("/api/directions/info",i.data);case 9:for(l=e.sent,c=l.data.weather,u=l.data.locations,this.weatherPerStep(s,r,c,n),d=0;d<r.length;d++)o.extend(r[d]);p=[],u.forEach(function(e,t){var a={city:e,weather:c[t]};p.includes(e)||(p.push(e),h.cityWeather.push(a))}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}},e,this,[[0,18]])}));return function(t,a,n,o){return e.apply(this,arguments)}}()},{key:"getWeatherInfo",value:function(e){return N.a.post("/api/directions/info",e)}},{key:"weatherPerStep",value:function(e,t,a,n){var o=this,r=0,s="";e.forEach(function(e,i){var l=o.determineSegCount(e,t,r);switch(r=l[0],a[i].Condition){case"rain":s="#43A047";break;case"danger":s="#E53935";break;case"snow":case"sleet":s="#1E88E5";break;case"cloudy":case"partly-cloudy-day":case"partly-cloudy-night":s="#616161";break;default:s="#FBC02D"}o.duration+=e.duration.value,o.distance+=e.distance.value,o.newPolyline(l[1],s,n)}),this.newPolyline(t.slice(r,t.length),s,n)}},{key:"determineSegCount",value:function(e,t,a){for(var n=[],o=a;Math.abs(t[o].lat()-e.end_location.lat)>=.1||Math.abs(t[o].lng()-e.end_location.lng)>=.1;)n.push(t[o]),o+=1;return 0!=o&&(o-=1),[o,n]}},{key:"newPolyline",value:function(e,t,a){var n=new window.google.maps.Polyline({path:e,strokeColor:t,strokeOpacity:1,strokeWeight:6});this.polylineArray.push(n),n.setMap(a)}}]),t}(n.Component),j=a(146),O=a(147),x=a(33),M=a.n(x),L=(a(113),a(72)),P=a.n(L),I=a(73),A=a.n(I),R=a(74),B=a.n(R),T=a(75),U=a.n(T),W=a(76),F=a.n(W),V=a(77),z=a.n(V),H=a(78),J=a.n(H),_=a(79),G=a.n(_),Q=a(80),K=a.n(Q);function Y(e){var t=Math.round(e.cityData.distance/1609.344),a=Math.round(e.cityData.duration/60),n=Math.round(e.cityData.duration/3600),r=n>0?"".concat(n,"hr"):"",s=a>0?"".concat(a,"min"):"";return o.a.createElement("div",null,o.a.createElement(M.a,{className:"mb-2 shadow rounded"},o.a.createElement(M.a.Body,null,o.a.createElement("div",{className:"lead row col-12"},o.a.createElement("b",null,e.cityData.startLocation.name),o.a.createElement("img",{src:K.a,className:"d-block arrow-img ml-2 mr-2"}),o.a.createElement("b",null,e.cityData.endLocation.name)),o.a.createElement("div",{className:"lead"},"Distance: ",t," miles"),o.a.createElement("div",{className:"lead"},"Driving Time: ",r," ",s))),o.a.createElement("div",{className:"menuScroll"},e.cityData.tripData.map(function(e,t){return o.a.createElement(M.a,{key:t,className:"".concat(Z(e.weather.Condition)[1]," mb-3 shadow rounded")},o.a.createElement(M.a.Body,{className:"row"},o.a.createElement("div",{className:"col-7 text-white"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 text-left lead"},e.city)),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-8 text-left lead"},e.weather.Description),o.a.createElement("div",{className:"col-4 text-left lead"},Math.round(e.weather.Temperature),"\xb0"))),o.a.createElement("div",{className:"col-5"},o.a.createElement("img",{className:"mx-auto d-block img-fluid img-white",src:Z(e.weather.Condition)[0]}))))})))}function Z(e){switch(e){case"rain":return[z.a,"rainCell"];case"danger":return[B.a,"stormCell"];case"snow":case"sleet":return[J.a,"snowCell"];case"cloudy":return[P.a,"cloudCell"];case"partly-cloudy-day":return[F.a,"cloudCell"];case"partly-cloudy-night":return[A.a,"cloudCell"];case"clear-night":return[U.a,"nightCell"];default:return[G.a,"sunCell"]}}var $=function(e){function t(e){return Object(p.a)(this,t),Object(g.a)(this,Object(f.a)(t).call(this,e))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row container"},o.a.createElement(j.a,{className:"ml-md-2 col-5 cityDataJumbotron"},this.props.cityData.tripData.length>0?o.a.createElement(Y,{cityData:this.props.cityData}):o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement(O.a,{animation:"border",variant:"light"}))))}}]),t}(n.Component),q=a(148),X=a(149),ee=(a(118),a(119),a(39)),te=a(81),ae=a.n(te),ne=a(46),oe=a.n(ne),re=a(82),se=a.n(re),ie=a(83),le=a.n(ie),ce=Object(ee.c)(function(){return o.a.createElement("span",{className:"spanText"},o.a.createElement("img",{className:"dragImage",src:se.a}))}),me=function(e){var t=e.onRemove,a=e.index;return o.a.createElement("button",{className:"col-auto mr-2",onClick:function(){return t(a)}},o.a.createElement("img",{src:le.a,className:"dragImage"}))},ue=Object(ee.b)(function(e){var t=e.value,a=e.index,n=e.onRemove,r=e.date,s=e.handleDate;return o.a.createElement("div",{className:"boxedItem row sortItem mb-2"},o.a.createElement(ce,null),o.a.createElement("span",{className:"col-4 mr-auto spanText"},t),o.a.createElement(oe.a,{"data-enable-time":!0,value:r,onChange:function(e){s(e,a++)}}),o.a.createElement(me,{onRemove:n,index:a}))}),de=Object(ee.a)(function(e){var t=e.items,a=e.onRemove,n=e.date,r=e.handleDate;return o.a.createElement("div",null,t.map(function(e,t){return o.a.createElement(ue,{key:t,index:t,value:e.name,onRemove:a,date:n[t+1],handleDate:r})}))}),pe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).handlePlacesStopSelect=function(){var e=a.autocompleteStop.getPlace(),t={lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),name:e.name},n=t?new Date:null;a.setState(function(e){return{stops:[].concat(Object(u.a)(e.stops),[t]),date:[].concat(Object(u.a)(e.date),[n])}}),a.stopInput.value=""},a.handlePlacesRemove=function(e){a.setState(function(t){return t.stops.splice(e,1),{stops:t.stops}})},a.onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex;a.setState(function(e){var a=e.stops;return{stops:ae()(a,t,n)}})},a.onSubmit=function(){return a.props.callback(a.state.stops)},a.handleDate=function(e,t){a.setState(function(a){return{date:a.date.map(function(a,n){return n===t?e:a})}})},a.state={stops:[],date:[new Date]},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e,t){1==this.props.show&&(this.stopInput=document.getElementById("stopLocation"),this.autocompleteStop=new window.google.maps.places.Autocomplete(this.stopInput),window.google.maps.event.addListener(this.autocompleteStop,"place_changed",this.handlePlacesStopSelect))}},{key:"render",value:function(){var e=this;return o.a.createElement(q.a,{className:"modalPurple",show:this.props.show,onHide:this.props.hide},o.a.createElement(q.a.Header,{closeButton:!0},o.a.createElement(q.a.Title,null,"Trip Stops")),o.a.createElement(q.a.Body,null,o.a.createElement("div",{className:"container"},o.a.createElement("h4",{className:"row"},"Current Route"),o.a.createElement("div",{className:"row boxedItem mb-2"},o.a.createElement("span",{className:"col-4 mr-auto spanText"},this.props.start),o.a.createElement(oe.a,{"data-enable-time":!0,value:this.state.date[0],onChange:function(t){e.handleDate(t,0)}})),o.a.createElement(de,{items:this.state.stops,onSortEnd:this.onSortEnd,onRemove:this.handlePlacesRemove,date:this.state.date,handleDate:this.handleDate,useDragHandle:!0}),o.a.createElement("div",{className:"row boxedItem mb-2"},o.a.createElement("span",{className:"spanText"},this.props.end)),o.a.createElement("div",{className:"row mt-5"},o.a.createElement("input",{className:"form-control",id:"stopLocation",type:"text",size:"50",placeholder:"Add Trip Stop",autoComplete:"on",runat:"server"})))),o.a.createElement(q.a.Footer,null,o.a.createElement(X.a,{onClick:this.onSubmit},"Set Stops")))}}]),t}(n.Component),he=function e(){Object(p.a)(this,e),this.tripData=[],this.duration=0,this.distance=0,this.startLocation={lat:0,lng:0,name:""},this.endLocation={lat:0,lng:0,name:""}},ge=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).GoogleMapsRef=Object(n.createRef)(),a.createMap=function(){return new window.google.maps.Map(a.GoogleMapsRef.current,{zoom:10,center:{lat:37.323,lng:-122.0322},disableDefaultUI:!0})},a.postStops=function(e){var t=e.map(function(e){return{city:e.city,condition:e.weather.Description,severe:e.weather.severe}});N.a.post("/api/locations",t).catch(function(e){console.log(e)})},a.callbackStart=function(e){var t=Object.assign({},a.state.tripData);t.startLocation=e,a.setState({tripData:t}),a.state.markerStart&&a.state.markerStart.setMap(null);var n=new window.google.maps.LatLng(e.lat,e.lng);a.state.markerStart=new window.google.maps.Marker({position:n,map:a.googleMaps,title:"Start Location",animation:window.google.maps.Animation.DROP}),a.googleMaps.setCenter(n),a.state.markerStart.setMap(a.googleMaps)},a.callbackEnd=function(e){var t=Object.assign({},a.state.tripData);t.endLocation=e,a.setState({tripData:t}),a.state.markerEnd&&a.state.markerEnd.setMap(null);var n=new window.google.maps.LatLng(e.lat,e.lng);a.state.markerEnd=new window.google.maps.Marker({position:n,title:"End Location",animation:window.google.maps.Animation.DROP}),a.googleMaps.setCenter(n),a.state.markerEnd.setMap(a.googleMaps)},a.state={loaded:!1,showCityData:!1,startMarker:null,endMarker:null,tripData:new he,showStopModal:!1},a.showDirections=a.showDirections.bind(Object(w.a)(a)),a.polylineArray=[],a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDjPZPz3Vv3KYdlkJ7ErdSVfpO2E707w0k","&libraries=places,geometry"),t.id="googleMaps",window.document.body.appendChild(t),t.addEventListener("load",function(){e.setState({loaded:!0}),e.googleMaps=e.createMap()})}},{key:"componentDidUpdate",value:function(e,t){0!==this.state.tripData.endLocation.lat&&0!==this.state.tripData.endLocation.lng&&0!==this.state.tripData.startLocation.lat&&0!==this.state.tripData.startLocation.lng&&(t.tripData.startLocation===this.state.tripData.startLocation&&t.tripData.endLocation===this.state.tripData.endLocation||this.showModal())}},{key:"showModal",value:function(){this.setState({showStopModal:!0})}},{key:"showDirections",value:function(){var e=Object(d.a)(m.a.mark(function e(t){var a,n,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showStopModal:!1,showCityData:!0}),this.polylineArray.forEach(function(e){e.setMap(null)}),this.polylineArray=[],a=new window.google.maps.LatLngBounds,e.next=6,this.createPolylineAndWeatherData([this.state.tripData.startLocation].concat(Object(u.a)(t),[this.state.tripData.endLocation]),this.googleMaps,a);case 6:n=e.sent,this.googleMaps.fitBounds(n[0]),(o=Object.assign({},this.state.tripData)).tripData=n[1],o.duration=n[2],o.distance=n[3],this.postStops(o.tripData),this.setState({tripData:o});case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"map",ref:this.GoogleMapsRef}),this.state.loaded?o.a.createElement(S,{callbackStart:this.callbackStart,callbackEnd:this.callbackEnd}):null,this.state.showCityData?o.a.createElement($,{cityData:this.state.tripData}):null,this.state.loaded?o.a.createElement(pe,{show:this.state.showStopModal,hide:function(){return e.setState({showStopModal:!1})},start:this.state.tripData.startLocation.name,end:this.state.tripData.endLocation.name,callback:this.showDirections}):null)}}]),t}(C),fe=a(6),we=a(150),ve=(a(70),function(e){return o.a.createElement("div",{className:"imageBackground"},o.a.createElement("img",{className:"mx-auto d-block img-logo mb-1 mt-3",style:{position:"relative"},alt:"logo",src:D.a}),e.children)}),Ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target;a.setState(Object(fe.a)({},t.name,t.value))},a.onSubmit=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};N.a.post("api/user/auth",t,{withCredentials:!0}).then(function(e){200==e.status&&a.props.history.push("/")}).catch(function(e){alert("Error logging in! Please try again.")})},a.submitNewUser=function(e){e.preventDefault();var t={name:a.state.name,username:a.state.username,password:a.state.password,email:a.state.email};N.a.post("api/user",t).then(function(e){200==e.status&&a.setState({login:!0})}).catch(function(e){alert("There was an issue signing you up! Please try again.")})},a.handleNewUser=function(e){e.preventDefault(),a.setState({login:!1})},a.state={name:"",username:"",password:"",email:"",login:!0},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement(ve,null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row justify-content-md-center mt-5"},o.a.createElement(we.a,{className:"col-5"},o.a.createElement(we.a.Header,{className:"headerFont"},this.state.login?"Login":"Register"),o.a.createElement(we.a.Body,null,this.state.login?o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{name:"username",className:"form-control",defaultValue:this.state.username,onChange:this.handleInputChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{name:"password",type:"password",className:"form-control",defaultValue:this.state.password,onChange:this.handleInputChange})),o.a.createElement(X.a,{type:"submit"},"Submit"),o.a.createElement(X.a,{type:"button",onClick:this.handleNewUser,className:"ml-2"},"Register")):o.a.createElement("form",{onSubmit:this.submitNewUser},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username"},"Name"),o.a.createElement("input",{name:"name",className:"form-control",defaultValue:this.state.name,onChange:this.handleInputChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{name:"username",className:"form-control",defaultValue:this.state.username,onChange:this.handleInputChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{name:"password",className:"form-control",defaultValue:this.state.password,onChange:this.handleInputChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"},"Email Adress"),o.a.createElement("input",{name:"email",className:"form-control",defaultValue:this.state.password,onChange:this.handleInputChange}),o.a.createElement("small",{className:"form-text text-muted"},"We will never share nor spam your Email Address")),o.a.createElement(X.a,{type:"submit"},"Submit")))))))}}]),t}(n.Component);N.a.defaults.baseURL="http://ec2-52-23-172-240.compute-1.amazonaws.com/";var be=function(){return o.a.createElement("div",null,o.a.createElement(i.a,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/login",component:Ee}),o.a.createElement(l.b,{path:"",component:(e=ge,function(t){function a(){var e;return Object(p.a)(this,a),(e=Object(g.a)(this,Object(f.a)(a).call(this))).state={redirect:!1,loading:!0},e}return Object(v.a)(a,t),Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.a.get("/api/user/auth",{withCredentials:!0}).then(function(t){if(200!==t.status)throw new Error(t.error);e.setState({loading:!1})}).catch(function(t){e.setState({loading:!1,redirect:!0})})}},{key:"render",value:function(){return this.state.loading?null:this.state.redirect?o.a.createElement(l.a,{to:"/login"}):o.a.createElement(o.a.Fragment,null,o.a.createElement(e,this.props))}}]),a}(n.Component))}))));var e};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(143);s.a.render(o.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,a){e.exports=a.p+"static/media/InTheClear.0cce63cd.png"},51:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){e.exports=a.p+"static/media/cloud.f1f9dc71.png"},73:function(e,t,a){e.exports=a.p+"static/media/CloudyNight.70df1a4b.png"},74:function(e,t,a){e.exports=a.p+"static/media/danger.5e73da14.png"},75:function(e,t,a){e.exports=a.p+"static/media/Night.df2219d3.png"},76:function(e,t,a){e.exports=a.p+"static/media/partlyCloudy.8039d00d.png"},77:function(e,t,a){e.exports=a.p+"static/media/rain.f9c6cead.png"},78:function(e,t,a){e.exports=a.p+"static/media/snow.44a68071.png"},79:function(e,t,a){e.exports=a.p+"static/media/sun.1a88d0f3.png"},80:function(e,t,a){e.exports=a.p+"static/media/arrow-right-solid.3aa5dcbc.svg"},82:function(e,t,a){e.exports=a.p+"static/media/align-justify-solid.179bf66a.svg"},83:function(e,t,a){e.exports=a.p+"static/media/trash-alt-solid.ce8e2a41.svg"},88:function(e,t,a){e.exports=a(144)},93:function(e,t,a){},95:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.e037f472.chunk.js.map